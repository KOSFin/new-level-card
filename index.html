<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEW LEVEL - Сеть компьютерных клубов в Магнитогорске</title>
    
    <style>
        /* CSS переменные для тем */
        :root {
            --bg-color: #f4f5f7;
            --text-color: #1a1a1a;
            --header-bg: rgba(255, 255, 255, 0.85);
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --accent-color: #2fbf00;;
            --accent-dark: #000000;
            --shadow-light: rgba(0, 0, 0, 0.05);
            --shadow-dark: rgba(0, 0, 0, 0.1);
            --modal-bg: rgba(0, 0, 0, 0.7);
            --icon-fill: #333;
            --button-bg: #e9e9e9;
            --button-text: #1a1a1a;
            --button-hover-bg: #dcdcdc;
            --footer-bg: #ffffff;
        }

        html.dark-theme {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --header-bg: rgba(24, 24, 24, 0.85);
            --card-bg: #1e1e1e;
            --border-color: #333;
            --accent-color: #6eff3e;
            --accent-dark: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.2);
            --shadow-dark: rgba(0, 0, 0, 0.4);
            --modal-bg: rgba(0, 0, 0, 0.8);
            --icon-fill: #ccc;
            --button-bg: #333;
            --button-text: #e0e0e0;
            --button-hover-bg: #444;
            --footer-bg: #1e1e1e;
        }
        
        /* Общие стили */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        section { padding: 60px 0; }
        
        /* Шапка */
        .header {
            position: sticky; top: 0; width: 100%; z-index: 1000;
            background-color: var(--header-bg); backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; height: 70px; }
        .logo { display: inline-block; width: 50px; height: 50px; background-color: var(--accent-color); border-radius: 50%; }
        .header-nav { display: none; }
        .header-nav ul { display: flex; list-style: none; gap: 10px; align-items: center; }
        .header-nav a, .menu-sidebar-content a {
            text-decoration: none; color: var(--text-color); font-weight: 500;
            padding: 8px 12px; border-radius: 6px;
            transition: background-color 0.2s, color 0.2s;
            display: flex; align-items: center;
        }
        .header-nav a:hover { background-color: var(--button-bg); }
        .dropdown-content {
            display: none; position: absolute; background-color: var(--card-bg);
            min-width: 220px; box-shadow: 0 8px 16px var(--shadow-light);
            border-radius: 8px; padding: 10px 0; margin-top: 0px; border: 1px solid var(--border-color);
        }
        .nav-item-dropdown:hover .dropdown-content { display: block; }
        .dropdown-content a { display: block; width: 100%; text-align: left; }
        .header-controls { display: flex; align-items: center; gap: 15px; }
        .icon-button {
            background: none; border: none; cursor: pointer; padding: 5px;
            display: flex; align-items: center; justify-content: center;
        }
        #menu-toggle { display: none; }

        .nav-item-dropdown svg {
            width: 16px;
            height: 16px;
            margin-left: 4px;
            fill: var(--icon-fill);
        }
        
        /* НОВЫЕ СТИЛИ ДЛЯ ИКОНОК */
        .icon {
            display: inline-block;
            -webkit-mask-size: contain;
            mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            mask-repeat: no-repeat;
            -webkit-mask-position: center;
            mask-position: center;
            transition: background-color 0.3s;
        }
        .icon-button .icon { width: 24px; height: 24px; }
        .nav-item-dropdown .icon { width: 16px; height: 16px; margin-left: 4px; }

        /* Меню (Sidebar для мобильных) */
        .menu-sidebar {
            position: fixed; top: 0; right: -100%; width: 300px; height: 100%;
            background-color: var(--card-bg); box-shadow: -4px 0 15px var(--shadow-light);
            z-index: 1001; transition: right 0.3s ease-in-out; padding-top: 70px;
        }
        .menu-sidebar.open { right: 0; }
        .menu-sidebar-content { padding: 20px; }
        .menu-sidebar-content ul { list-style: none; }
        .menu-sidebar-content ul li a { display: block; padding: 12px 0; font-size: 1.1rem; border-bottom: 1px solid var(--border-color); }
        .menu-sidebar-content .submenu li a { padding-left: 20px; font-size: 1rem; color: #888; }
        .menu-sidebar-content .submenu { display: none; }
        .menu-sidebar-content .submenu.open { display: block; }
        .menu-sidebar-content .has-submenu > a { display: flex; justify-content: space-between; align-items: center;}
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--modal-bg); z-index: 999; }
        .overlay.active { display: block; }

        /* Главный экран */
        .hero { text-align: center; padding: 80px 0; }
        .main-heading {
            font-family: 'Impact', 'Arial Black', sans-serif; 
            font-style: italic; 
            font-weight: bold; 
            text-transform: uppercase;
            font-size: clamp(3rem, 10vw, 6rem); font-weight: 900; line-height: 1.1;
            text-shadow: -1px -1px 0 var(--bg-color), 1px -1px 0 var(--bg-color), -1px 1px 0 var(--bg-color), 1px 1px 0 var(--bg-color);
        }
        .main-heading .new { color: var(--accent-color); }
        .main-heading .level { color: var(--accent-dark); }
        .subtitle { margin-top: 10px; font-size: clamp(1rem, 3vw, 1.5rem); font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--text-color); }
        .socials { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .socials a, .socials button {
            display: flex; align-items: center; justify-content: center;
            width: 50px; height: 50px; border-radius: 50%;
            background-color: var(--card-bg); border: 1px solid var(--border-color);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .socials a:hover, .socials button:hover { transform: translateY(-3px); box-shadow: 0 4px 10px var(--shadow-light); }
        .socials a .icon, .socials button .icon { width: 28px; height: 28px; }

        /* Секции */
        .section-heading { text-align: center; font-size: 2.5rem; margin-bottom: 40px; font-weight: 700; }
        .clubs-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 30px; }
        .club-card {
            background-color: var(--card-bg); border-radius: 16px; overflow: hidden;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px -1px var(--shadow-light), 0 2px 4px -1px var(--shadow-light);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex; flex-direction: column;
        }
        .club-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px var(--shadow-light), 0 4px 6px -2px var(--shadow-dark); }
        .club-card-image { height: 180px; background-color: #e0e0e0; background-size: cover; background-position: center; }
        .dark-theme .club-card-image { background-color: #333; }
        
        .club-card-content { padding: 25px; display: flex; flex-direction: column; flex-grow: 1; }
        .club-card h3 { font-size: 1.5rem; margin-bottom: 10px; }
        .club-card .club-address { color: #888; font-size: 0.9rem; margin-bottom: 20px; }
        
        .club-info-item { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
        .club-info-item .icon { width: 20px; height: 20px; flex-shrink: 0; }
        .gis-info .icon { width: 24px; height: 24px; }
        
        .club-rating { display: flex; align-items: center; gap: 10px; background-color: var(--button-bg); padding: 5px 12px; border-radius: 20px; font-size: 0.9rem; }
        
        .club-card-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border-color); }
        .club-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .club-buttons .btn {
            background-color: var(--button-bg); color: var(--button-text); border: none;
            padding: 12px; border-radius: 8px; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s; text-align: center;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .club-buttons .btn:hover { background-color: var(--button-hover-bg); }
        .club-nav-buttons { display: flex; gap: 10px; justify-content: center; }
        .club-nav-buttons a {
            display: flex; align-items: center; justify-content: center;
            width: 40px; height: 40px; border: 1px solid var(--border-color);
            border-radius: 50%; background-color: var(--card-bg);
            opacity: 0.8; transition: opacity 0.2s;
        }
        .club-nav-buttons a:hover { opacity: 1; }
        .club-nav-buttons a img { width: 20px; height: 20px; } /* Стили для цветных логотипов */

        /* Акции */
        #promotions .section-heading span { border-bottom: 3px solid var(--accent-color); }
        .promo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .promo-card { background-color: var(--card-bg); padding: 25px; border-radius: 12px; border-left: 5px solid var(--accent-color); }
        .promo-card h3 { font-size: 2.5rem; }
        .promo-card h4 { font-size: 1.2rem; margin-top: 5px; }
        .promo-card p { margin-top: 10px; }

        /* Подвал */
        .footer { background-color: var(--footer-bg); border-top: 1px solid var(--border-color); padding: 40px 0; text-align: center; margin-top: 60px; }
        .footer-content { display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .footer-logo { font-size: 1.5rem; font-weight: 700; }
        .footer-logo sup { font-size: 0.8rem; }
        .footer p { font-size: 0.9rem; color: #888; }


        /* Модальные окна */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; display: none; justify-content: center; align-items: center; background-color: var(--modal-bg); padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background-color: var(--bg-color); padding: 30px; border-radius: 12px; max-width: 500px; width: 100%; position: relative; text-align: center; }
        .modal-close { position: absolute; top: 10px; right: 15px; background: none; border: none; cursor: pointer; font-size: 1.5rem; line-height: 1; color: var(--icon-fill); }
        #qr-code-container { margin-top: 20px; display: flex; justify-content: center; }
        .modal-call-content h3 { font-size: 1.5rem; }
        .modal-call-content p { font-size: 1.2rem; margin: 15px 0; }
        .modal-call-content .btn-call { display: inline-block; background-color: var(--accent-color); color: #000; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-weight: 700; font-size: 1.1rem; }
        #map-modal-content { width: 90%; height: 80%; max-width: 1000px; padding: 10px; }
        #map-iframe { width: 100%; height: 100%; border: none; border-radius: 8px; }
        #price-modal-content { max-height: 100vh; overflow-y: auto; text-align: left; }
        #price-modal-content img { width: 100%; border-radius: 8px; margin-bottom: 15px; }

        /* Адаптивность */
        @media (min-width: 1024px) { .header-nav { display: block; } #menu-toggle { display: none; } }
        @media (max-width: 1023px) { #menu-toggle { display: flex; } }
    </style>
</head>
<body>

    <header class="header">
        <div class="container header-content">
            <img src="icons/logo.jpg" class="logo" aria-label="Логотип NEW LEVEL"></img>
            <nav class="header-nav" id="header-nav"></nav>
            <div class="header-controls">
                <button class="icon-button" id="theme-toggle" aria-label="Сменить тему">
                    <img id="theme-icon-sun" class="icon" src="icons/sun.svg">
                    <img id="theme-icon-moon" class="icon" src="icons/moon.svg">
                </button>
                <button class="icon-button" id="menu-toggle" aria-label="Открыть меню">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
                        <path d="M 0 7.5 L 0 12.5 L 50 12.5 L 50 7.5 Z M 0 22.5 L 0 27.5 L 50 27.5 L 50 22.5 Z M 0 37.5 L 0 42.5 L 50 42.5 L 50 37.5 Z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <div class="menu-sidebar" id="menu-sidebar"></div>
    <div class="overlay" id="overlay"></div>

    <main>
        <section class="hero">
            <div class="container">
                <h1 class="main-heading"><span class="new">НОВЫЙ</span> <span class="level">УРОВЕНЬ</span></h1>
                <p class="subtitle">СЕТЬ КОМПЬЮТЕРНЫХ КЛУБОВ В МАГНИТОГОРСКЕ</p>
                <div class="socials">
                    <a href="#" target="_blank" aria-label="Мы в Instagram">
                        <img class="icon" src="icons/vk.png">
                    </a>
                    <button id="qr-code-btn" aria-label="Показать QR-код сайта">
                        <img class="icon" src="icons/insta.png">
                    </button>
                </div>
            </div>
        </section>

        <section id="clubs">
            <div class="container">
                <h2 class="section-heading">Наши клубы</h2>
                <div class="clubs-grid"></div>
            </div>
        </section>

        <section id="promotions">
            <div class="container">
                <h2 class="section-heading"><span>Постоянные</span> акции</h2>
                <div class="promo-grid">
                    <div class="promo-card"><h3>x2 🥳</h3><h4>Для именинника и его гостей</h4><p>Удвоим любое пополнение счета в твой день рождения! Акция действует 3 дня до и 3 дня после праздника.</p></div>
                    <div class="promo-card"><h3>+60₽ 🧑‍🤝‍🧑</h3><h4>Приведи друга</h4><p>Приводи друга, который еще не был у нас. Он пополняет счет на 60₽, и вы оба получаете по 60₽ на свои аккаунты!</p></div>
                    <div class="promo-card"><h3>4+1=4 🎮</h3><h4>Для больших компаний</h4><p>Приходите впятером, а платите только за четверых. Идеально для командных сражений!</p></div>
                </div>
            </div>
        </section>

        <section id="info">
            <div class="container">
                <a>*Instagram принадлежит Meta - признана экстримисткой в РФ</a>
                
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-logo">NEW LEVEL <sup>®</sup></div>
            <p>© <span id="current-year"></span> NEW LEVEL. Все права защищены.</p>
        </div>
    </footer>
    
    <div id="qr-modal" class="modal"><div class="modal-content"><button class="modal-close" data-target="qr-modal">×</button><h3>Наш сайт</h3><p>Отсканируйте QR-код, чтобы поделиться</p><div id="qr-code-container"></div></div></div>
    <div id="call-modal" class="modal"><div class="modal-content" id="call-modal-content"></div></div>
    <div id="map-modal" class="modal"><div class="modal-content" id="map-modal-content"><button class="modal-close" data-target="map-modal">×</button><iframe id="map-iframe" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div></div>
    <div id="price-modal" class="modal"><div class="modal-content" id="price-modal-content"></div></div>

    <script>!function(){function t(t){this.mode=s.MODE_8BIT_BYTE,this.data=t}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var i=0;i<t.length-r;i++)this.num[i]=t[i+r]}function i(t,e){this.totalCount=t,this.dataCount=e}function n(t,e){this.num=t,this.genPoly=e}function o(){this.buffer=[],this.length=0}var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a={L:1,M:0,Q:3,H:2},h={PATTERN_POSITION_DETECTION:0,PATTERN_ALIGNMENT:1,PATTERN_TIMING:2,PATTERN_FORMAT_INFO:3,PATTERN_VERSION_INFO:4,PATTERN_DATA_AND_ERROR_CORRECTION:5},u={MIN_LENGTH:10,MAX_LENGTH:20},c={};c.PAD0=236,c.PAD1=17,t.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[i]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAlignmentPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(r>=0&&r<=6&&(0==i||6==i)||i>=0&&i<=6&&(0==r||6==r)||r>=2&&r<=4&&i>=2&&i<=4?this.modules[t+r][e+i]=!0:this.modules[t+r][e+i]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var i=l.getLostPoint(this);(0==r||t>i)&&(t=i,e=r)}return e},createMovieClip:function(t,e,r){var i=t.createEmptyMovieClip(e,r),n=1;this.make();for(var o=0;o<this.modules.length;o++)for(var s=o*n,a=0;a<this.modules[o].length;a++){var h=a*n,l=this.modules[o][a];l&&i.beginFill(0,100),i.moveTo(h,s),i.lineTo(h+n,s),i.lineTo(h+n,s+n),i.lineTo(h,s+n),i.endFill()}},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAlignmentPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var i=t[e],n=t[r];if(null==this.modules[i][n])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)-2==o||2==o||-2==s||2==s||0==o&&0==s?this.modules[i+o][n+s]=!0:this.modules[i+o][n+s]=!1}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var i=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=i}for(var r=0;r<18;r++){var i=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=i}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,i=l.getBCHTypeInfo(r),n=0;n<15;n++){var o=!t&&1==(i>>n&1);n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(var n=0;n<15;n++){var o=!t&&1==(i>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,i=this.moduleCount-1,n=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++){if(null==this.modules[i][s-a]){var u=!1;o<t.length&&(u=1==(t[o]>>>n&1));l.getMask(e,i,s-a)&&(u=!u),this.modules[i][s-a]=u,n--,-1==n&&(o++,n=7)}}if(i+=r,(i<0||this.moduleCount<=i)&&(i-=r,r=-r),0==(s-a-1))break}}},e.createData=function(t,r,n){for(var o=i.getRSBlocks(t,r),s=new u,a=0;a<n.length;a++){var h=n[a];s.put(h.mode,4),s.put(h.getLength(),l.getLengthInBits(h.mode,t)),h.write(s)}for(var c=0,a=0;a<o.length;a++)c+=o[a].dataCount;if(s.getLengthInBits()>8*c)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*c+")");for(s.getLengthInBits()+4<=8*c&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*c)&&(s.put(e.PAD0,8),!(s.getLengthInBits()>=8*c));)s.put(e.PAD1,8);return e.createBytes(s,o)},e.createBytes=function(t,e){for(var i=0,o=0,s=0,a=new Array(e.length),h=new Array(e.length),u=0;u<e.length;u++){var c=e[u].dataCount,f=e[u].totalCount-c;o=Math.max(o,c),s=Math.max(s,f),a[u]=new Array(c);for(var g=0;g<a[u].length;g++)a[u][g]=255&t.buffer[g+i];i+=c;var d=l.getErrorCorrectPolynomial(f),p=new r(a[u],d.getLength()-1),m=p.mod(d);h[u]=new Array(m.getLength());for(var g=0;g<h[u].length;g++){var v=g+m.getLength()-h[u].length;h[u][g]=v>=0?m.get(v):0}}for(var w=0,g=0;g<o;g++)for(var u=0;u<e.length;u++)g<a[u].length&&(t.buffer[w++]=a[u][g]);for(var g=0;g<s;g++)for(var u=0;u<e.length;u++)g<h[u].length&&(t.buffer[w++]=h[u][g]);return t.buffer};for(var l={getBCHTypeInfo:function(t){for(var e=t<<10;l.getBCHDigit(e)-l.getBCHDigit(7973)>=0;)e^=7973<<l.getBCHDigit(e)-l.getBCHDigit(7973);return(t<<10|e)^21522},getBCHTypeNumber:function(t){for(var e=t<<12;l.getBCHDigit(e)-l.getBCHDigit(335)>=0;)e^=335<<l.getBCHDigit(e)-l.getBCHDigit(335);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION[t-1]},getMask:function(t,e,r){switch(t){case 0:return(e+r)%2==0;case 1:return e%2==0;case 2:return r%3==0;case 3:return(e+r)%3==0;case 4:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case 5:return e*r%2+e*r%3==0;case 6:return(e*r%2+e*r%3)%2==0;case 7:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),i=0;i<t;i++)e=e.multiply(new r([1,d.gexp(i)],0));return e},getLengthInBits:function(t,e){if(e>=1&&e<10)switch(t){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i++)for(var n=0;n<e;n++){for(var o=0,s=!1,a=i;a<e;a++){if(t.isDark(a,n)==s)o++;else{if(o>=5)r+=3+o-5;o=1,s=!t.isDark(a,n)}}if(o>=5)r+=3+o-5;for(var o=0,s=!1,h=n;h<e;h++){if(t.isDark(i,h)==s)o++;else{if(o>=5)r+=3+o-5;o=1,s=!t.isDark(i,h)}}o>=5&&(r+=3+o-5)}for(var i=0;i<e-1;i++)for(var n=0;n<e-1;n++){var l=0;t.isDark(i,n)&&l++,t.isDark(i+1,n)&&l++,t.isDark(i,n+1)&&l++,t.isDark(i+1,n+1)&&l++,(0==l||4==l)&&(r+=3)}for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(r+=40);for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(r+=40);for(var u=0,i=0;i<e;i++)for(var n=0;n<e;n++)t.isDark(i,n)&&u++;var c=Math.abs(100*u/e/e-50)/5;return r+=10*c}},f=function(t,e){this.string=t,this.options=e},d={glog:function(t){if(t<1)throw new Error("glog(" + t + ")");return d.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return d.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;g<8;g++)d.EXP_TABLE[g]=1<<g;for(var g=8;g<256;g++)d.EXP_TABLE[g]=d.EXP_TABLE[g-4]^d.EXP_TABLE[g-5]^d.EXP_TABLE[g-6]^d.EXP_TABLE[g-8];for(var g=0;g<255;g++)d.LOG_TABLE[d.EXP_TABLE[g]]=g;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=d.gexp(d.glog(this.get(i))+d.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=d.glog(this.get(0))-d.glog(t.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(var n=0;n<t.getLength();n++)i[n]^=d.gexp(d.glog(t.get(n))+e);return new r(i,0).mod(t)}},i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,16,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,147,117,4,148,118],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,145,115,13,146,116],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,48,7,76,49],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(t,e){var r=i.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,o=[],s=0;s<n;s++)for(var a=r[3*s+0],h=r[3*s+1],l=r[3*s+2],u=0;u<a;u++)o.push(new i(h,l));return o},i.getRsBlockTable=function(t,e){switch(e){case a.L:return i.RS_BLOCK_TABLE[4*(t-1)+0];case a.M:return i.RS_BLOCK_TABLE[4*(t-1)+1];case a.Q:return i.RS_BLOCK_TABLE[4*(t-1)+2];case a.H:return i.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},n.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length}},o.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},l.PATTERN_POSITION=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],f.prototype.make=function(){var t=new e(u.MIN_LENGTH,a.L);t.addData(this.string),t.make();var r=document.createElement("div");return r.innerHTML=this.createImgTag(),r.firstChild},f.prototype.createImgTag=function(t,r){t=t||2,r=r||4;var i=new e(this.options.typeNumber||u.MIN_LENGTH,this.options.errorCorrectLevel||a.L);i.addData(this.string),i.make();var n=i.getModuleCount(),o=(n+2*r)*t,s="";s+='<img src="',s+=this.createDataURL(t,r),s+='" ',s+='width="',s+=o,s+='" ',s+='height="',s+=o,s+='"/>';var h=document.createElement("div");return h.innerHTML=s,h.firstChild},f.prototype.createDataURL=function(t,r){var i=new e(this.options.typeNumber||u.MIN_LENGTH,this.options.errorCorrectLevel||a.L);i.addData(this.string),i.make();var n=i.getModuleCount(),o=document.createElement("canvas");o.width=(n+2*r)*t,o.height=(n+2*r)*t;for(var s=o.getContext("2d"),a=0;a<n;a++)for(var h=0;h<n;h++){s.fillStyle=i.isDark(a,h)?"#000000":"#ffffff";var l=a*t+r*t,u=h*t+r*t;s.fillRect(l,u,t,t)}return o.toDataURL()},f.prototype.createImgTagFromContext=function(t,r){r=r||2;var i=new e(this.options.typeNumber||u.MIN_LENGTH,this.options.errorCorrectLevel||a.L);i.addData(this.string),i.make();for(var n=i.getModuleCount(),o=0;o<n;o++)for(var s=0;s<n;s++){t.fillStyle=i.isDark(o,s)?"#000000":"#ffffff";var a=o*r,h=s*r;t.fillRect(a,h,r,r)}},f.prototype.toDataURL=function(){var t=new e(this.options.typeNumber||u.MIN_LENGTH,this.options.errorCorrectLevel||a.L);return t.addData(this.string),t.make(),void 0},this.QRCode=f}();</script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ИСХОДНЫЕ ДАННЫЕ ---
            const clubsData = [
                { id: 'komsomolskaya', address: 'ул. Комсомольская, 19', phone: '+7 (958) 267-11-30', phoneLink: '+79582671130', coords: { lat: 53.3915, lon: 58.9745 }, gis2Id: '3659702978449744', images: { price: 'images/price-komsomolskaya.jpg', config: 'path/to/your/config-komsomolskaya.jpg' } },
                { id: 'lenina', address: 'пр. Ленина, 154А', phone: '+7 (958) 267-11-07', phoneLink: '+79582671107', coords: { lat: 53.3768, lon: 59.0620 }, gis2Id: '70000001057596023', images: { price: 'images/price-lenina.jpg', config: 'path/to/your/config-lenina.jpg' } },
                { id: '50let', address: 'ул. 50-летия Магнитки, 38а', phone: '+7 (958) 267-11-34', phoneLink: '+79582671134', coords: { lat: 53.3897, lon: 59.0345 }, gis2Id: '70000001040985001', images: { price: 'images/price-50let.jpg', config: 'path/to/your/config-50let.jpg' } },
                { id: 'zeleniy', address: 'ул. Зелёный Лог, 26', phone: '+7 (958) 267-11-40', phoneLink: '+79582671140', coords: { lat: 53.3820, lon: 59.0435 }, gis2Id: '70000001095353030', images: { price: 'images/price-zeleniy.jpg', config: 'path/to/your/config-zeleniy.jpg' } }
            ];

            // --- ПЕРЕКЛЮЧАТЕЛЬ ТЕМЫ ---
            const themeToggle = document.getElementById('theme-toggle');
            const sunIcon = document.getElementById('theme-icon-sun');
            const moonIcon = document.getElementById('theme-icon-moon');
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark-theme');
                    sunIcon.style.display = 'none'; moonIcon.style.display = 'block';
                } else {
                    document.documentElement.classList.remove('dark-theme');
                    sunIcon.style.display = 'block'; moonIcon.style.display = 'none';
                }
            };
            const userPreference = localStorage.getItem('theme');
            const systemPreference = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            applyTheme(userPreference || systemPreference);
            themeToggle.addEventListener('click', () => {
                const newTheme = document.documentElement.classList.contains('dark-theme') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });

            // --- МОДАЛЬНЫЕ ОКНА ---
            const openModal = (modalId) => document.getElementById(modalId).classList.add('active');
            const closeModal = (modalId) => document.getElementById(modalId).classList.remove('active');
            document.querySelectorAll('.modal-close').forEach(btn => btn.addEventListener('click', () => closeModal(btn.dataset.target)));
            document.querySelectorAll('.modal').forEach(modal => modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(modal.id); }));
            
            document.getElementById('qr-code-btn').addEventListener('click', () => {
                const qrContainer = document.getElementById('qr-code-container');
                qrContainer.innerHTML = '';
                let qrText = window.location.origin;
                if (!qrText || qrText === "null" || window.location.protocol === 'file:') {
                    qrText = 'https://new-level.ruka.me'; // Домен по умолчанию
                }
                new QRCode(qrContainer, { text: qrText, width: 200, height: 200 });
                openModal('qr-modal');
            });

            // --- ГЕНЕРАЦИЯ КАРТОЧЕК КЛУБОВ ---
            const clubsGrid = document.querySelector('.clubs-grid');
            const fetch2GisData = async (branchId) => {
                const url = `https://public-api.reviews.2gis.com/2.0/branches/${branchId}/reviews?limit=50&is_advertiser=true&fields=meta.providers,meta.branch_rating,meta.branch_reviews_count,meta.total_count,reviews.hiding_reason,reviews.is_verified,reviews.emojis&without_my_first_review=false&rated=true&sort_by=friends&key=6e7e1929-4ea9-4a5d-8c05-d601860389bd&locale=ru_RU`;
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return await response.json();
                } catch (error) {
                    console.error(`Ошибка при запросе к API 2GIS для филиала ${branchId}:`, error);
                    return null;
                }
            };

            clubsData.forEach(club => {
                const card = document.createElement('div');
                card.className = 'club-card';
                card.id = `club-${club.id}`;
                card.innerHTML = `
                    <div class="club-card-image"></div>
                    <div class="club-card-content">
                        <div>
                            <h3>${club.address}</h3>
                            <div class="club-info-item">
                                <img class="icon" src="icons/tel.png">
                                <span>${club.phone}</span>
                            </div>
                            <div class="club-info-item gis-info" id="gis-info-${club.id}">
                                <span>Загрузка данных из 2GIS...</span>
                            </div>
                        </div>
                        <div class="club-card-footer">
                            <div class="club-buttons">
                                <button class="btn btn-call" data-phone="${club.phoneLink}" data-address="${club.address}">📞 Позвонить</button>
                                <button class="btn btn-map" data-lat="${club.coords.lat}" data-lon="${club.coords.lon}">🗺️ На карте</button>
                                <button class="btn btn-price" data-club-id="${club.id}" data-type="price">💲 Прайс</button>
                                <button class="btn btn-config" data-club-id="${club.id}" data-type="config">🖥️ ПК</button>
                            </div>
                            <div class="club-nav-buttons">
                                <a href="https://2gis.ru/magnitogorsk/firm/${club.gis2Id}" target="_blank" title="Открыть в 2GIS"><img src="icons/2gis.png" alt="2GIS"/></a>
                                <a href="https://yandex.ru/maps/?pt=${club.coords.lon},${club.coords.lat}&z=18" target="_blank" title="Открыть в Яндекс.Картах"><img src="icons/yandex-map.png" alt="Yandex"/></a>
                            </div>
                        </div>
                    </div>
                `;
                clubsGrid.appendChild(card);

                fetch2GisData(club.gis2Id).then(data => {
                    const gisInfoContainer = document.getElementById(`gis-info-${club.id}`);
                    if (data && data.meta) {
                        const meta = data.meta;
                        const rating = meta.branch_rating || 'N/A';
                        const count = meta.branch_reviews_count || '0';
                        gisInfoContainer.innerHTML = `
                            <img class="icon" src="icons/2gis.png">
                            <div class="club-rating"><span>⭐ ${rating}</span><span>💬 ${count} отзывов</span></div>
                        `;
                    } else {
                        gisInfoContainer.innerHTML = '<span>Не удалось загрузить данные из 2GIS.</span>';
                    }
                });
            });

            // --- ОБРАБОТЧИКИ КНОПОК В КАРТОЧКАХ ---
            document.querySelectorAll('.btn-call').forEach(btn => btn.addEventListener('click', (e) => {
                const target = e.currentTarget;
                const phone = target.dataset.phone;
                const address = target.dataset.address;
                document.getElementById('call-modal-content').innerHTML = `<button class="modal-close" data-target="call-modal">×</button><h3>${address}</h3><p>${phone.replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/, '$1 ($2) $3-$4-$5')}</p><a href="tel:${phone}" class="btn-call">Позвонить</a>`;
                openModal('call-modal');
                document.querySelector('#call-modal .modal-close').addEventListener('click', () => closeModal('call-modal'));
            }));
            
            document.querySelectorAll('.btn-map').forEach(btn => btn.addEventListener('click', (e) => {
                const target = e.currentTarget;
                const lat = target.dataset.lat; const lon = target.dataset.lon;
                document.getElementById('map-iframe').src = `https://www.openstreetmap.org/export/embed.html?bbox=${parseFloat(lon)-0.005},${parseFloat(lat)-0.005},${parseFloat(lon)+0.005},${parseFloat(lat)+0.005}&layer=mapnik&marker=${lat},${lon}`;
                openModal('map-modal');
            }));
            
            document.querySelectorAll('.btn-price, .btn-config').forEach(btn => btn.addEventListener('click', (e) => {
                const target = e.currentTarget;
                const clubId = target.dataset.clubId;
                const type = target.dataset.type;
                const club = clubsData.find(c => c.id === clubId);
                const modalContent = document.getElementById('price-modal-content');

                if (club && club.images && club.images[type]) {
                    const title = type === 'price' ? 'Цены и тарифы' : 'Конфигурации ПК';
                    const imageUrl = club.images[type];
                    
                    modalContent.innerHTML = `
                        <button class="modal-close" data-target="price-modal">×</button>
                        <h3>${title} <span style="font-weight: 400; color: #888;">(${club.address})</span></h3>
                        <img src="${imageUrl}" alt="${title}" style="width: 100%; border-radius: 8px; margin-top: 15px; border: 1px solid var(--border-color);">
                    `;
                } else {
                     modalContent.innerHTML = `
                        <button class="modal-close" data-target="price-modal">×</button>
                        <h3>Информация не найдена</h3>
                        <p>К сожалению, изображение для данного раздела отсутствует.</p>
                    `;
                }
                modalContent.querySelector('.modal-close').addEventListener('click', () => closeModal('price-modal'));
                openModal('price-modal');
            }));

            // --- АДАПТИВНОЕ МЕНЮ ---
            const navContainer = document.getElementById('header-nav');
            const menuSidebar = document.getElementById('menu-sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            const overlay = document.getElementById('overlay');
            const menuItems = [
                { name: 'Клубы', href: '#clubs', sub: clubsData.map(c => ({ name: c.address, href: `#club-${c.id}` })) },
                { name: 'Акции', href: '#promotions' },
                { name: 'Контакты', href: '.footer' },
            ];
            const createMenu = () => {
                let desktopMenuHTML = '<ul>';
                menuItems.forEach(item => { desktopMenuHTML += item.sub ? `<li class="nav-item-dropdown"><a href="${item.href}">${item.name} <svg viewBox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" /></svg></a><div class="dropdown-content">${item.sub.map(subItem => `<a href="${subItem.href}">${subItem.name}</a>`).join('')}</div></li>` : `<li><a href="${item.href}">${item.name}</a></li>`; });
                navContainer.innerHTML = desktopMenuHTML + '</ul>';
                navContainer.innerHTML = desktopMenuHTML + '</ul>';
                
                let mobileMenuHTML = '<div class="menu-sidebar-content"><ul>';
                menuItems.forEach(item => { mobileMenuHTML += item.sub ? `<li class="has-submenu"><a href="#" class="submenu-toggle">${item.name} <svg viewBox="0 0 24 24" style="width:18px;height:18px;fill:var(--icon-fill);"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" /></svg></a><ul class="submenu">${item.sub.map(subItem => `<li><a href="${subItem.href}">${subItem.name}</a></li>`).join('')}</ul></li>` : `<li><a href="${item.href}">${item.name}</a></li>`; });
                menuSidebar.innerHTML = mobileMenuHTML + '</ul></div>';
                
                menuSidebar.querySelectorAll('.submenu-toggle').forEach(toggle => toggle.addEventListener('click', (e) => { e.preventDefault(); e.target.closest('li').querySelector('.submenu').classList.toggle('open'); }));
                menuSidebar.querySelectorAll('a').forEach(link => { if (!link.classList.contains('submenu-toggle')) { link.addEventListener('click', closeMobileMenu); } });
            };
            const openMobileMenu = () => { menuSidebar.classList.add('open'); overlay.classList.add('active'); };
            const closeMobileMenu = () => { menuSidebar.classList.remove('open'); overlay.classList.remove('active'); };
            menuToggle.addEventListener('click', openMobileMenu);
            overlay.addEventListener('click', closeMobileMenu);
            createMenu();
            
            document.getElementById('current-year').textContent = new Date().getFullYear();
        });
    </script>
</body>
</html>